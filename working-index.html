<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />
    <title>KING SALUT - –Ø—Ä–∫–∏–µ —Å–∞–ª—é—Ç—ã –∏ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π</title>
    <meta name="description" content="KING SALUT - –Ø—Ä–∫–∏–µ —Å–∞–ª—é—Ç—ã –∏ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" /></noscript>
</head>
<body>
    <!-- –ü—Ä–æ—Å—Ç–æ–π header -->
    <header class="header">
        <div class="header-top">
            <div class="container">
                <div class="header-top-content">
                    <div class="logo">
                        <img src="images/icons/crown-icon.svg" alt="Crown" class="logo-icon" />
                    </div>
                    <div class="contact">
                        <i class="fas fa-phone"></i>
                        <span>+7 (776) 456 78 68</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-bottom">
            <div class="container">
                <div class="header-bottom-content">
                    <nav class="nav">
                        <a href="#" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                        <a href="#" class="nav-link">–ö–∞—Ç–∞–ª–æ–≥</a>
                        <a href="#" class="nav-link">–ü–æ —Å–æ–±—ã—Ç–∏—è–º</a>
                        <a href="#" class="nav-link">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a>
                        <a href="#" class="nav-link">–û –∫–æ–º–ø–∞–Ω–∏–∏</a>
                    </nav>
                    <div class="search">
                        <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ 1789 —Ç–æ–≤–∞—Ä–æ–≤" />
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="icons">
                        <a href="#" class="cart-link" title="–ö–æ—Ä–∑–∏–Ω–∞" id="cartLink">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count" id="cartCount">0</span>
                        </a>
                        <i class="fas fa-balance-scale"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container-hero">
            <div class="hero-content">
                <h1 class="hero-title">–Ø—Ä–∫–∏–µ —Å–∞–ª—é—Ç—ã –∏ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π</h1>
                <div class="hero-stats">
                    <div class="stat">
                        <div class="stat-number">200,000+</div>
                        <div class="stat-label">–î–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat">
                        <div class="stat-number">130+</div>
                        <div class="stat-label">–ó–∞–∫–∞–∑–æ–≤ –≤ –¥–µ–Ω—å</div>
                    </div>
                </div>
                <div class="hero-buttons">
                    <button class="btn btn-primary">–í—ã–±—Ä–∞—Ç—å –Ω–∞–±–æ—Ä –∫ –ø—Ä–∞–∑–¥–Ω–∏–∫—É</button>
                    <button class="btn btn-success">
                        <i class="fab fa-whatsapp"></i>
                        –ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Category Filters -->
    <section class="categories">
        <div class="container">
            <div class="category-filters">
                <div class="category-filter">
                    <span class="category-icon">üî•</span>
                    <span>–°–∞–ª—é—Ç—ã –æ—Ç 5 000 –¥–æ 25 000 —Ç–≥</span>
                </div>
                <div class="category-filter">
                    <span class="category-icon">üî•</span>
                    <span>–°–∞–ª—é—Ç—ã –æ—Ç 25 000 - 50 000 —Ç–≥</span>
                </div>
                <div class="category-filter">
                    <span class="category-icon">üî•</span>
                    <span>–°–∞–ª—é—Ç—ã –æ—Ç 50 000 –¥–æ 100 000 —Ç–≥</span>
                </div>
                <div class="category-filter">
                    <span class="category-icon">üî•</span>
                    <span>–°–∞–ª—é—Ç—ã –æ—Ç 100 000 –∏ –≤—ã—à–µ</span>
                </div>
                <div class="category-filter">
                    <span class="category-icon">üéÑ</span>
                    <span>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Å–∞–ª—é—Ç—ã</span>
                </div>
                <div class="category-filter">
                    <span class="category-icon">üëë</span>
                    <span>VIP —Å–∞–ª—é—Ç—ã</span>
                </div>
            </div>
        </div>
    </section>

    <!-- New Arrivals -->
    <section class="products-section">
        <div class="container">
            <h2 class="section-title">–ù–æ–≤–∏–Ω–∫–∏</h2>
            <div class="products-grid" id="new-products">
                <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            <button class="btn btn-show-all">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</button>
        </div>
    </section>

    <!-- Top Sales -->
    <section class="products-section">
        <div class="container">
            <h2 class="section-title">–¢–æ–ø –ø—Ä–æ–¥–∞–∂</h2>
            <div class="products-grid" id="top-products">
                <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            <button class="btn btn-show-all">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</button>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <h2 class="section-title">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
            <div class="faq-list">
                <div class="faq-item active">
                    <div class="faq-question">
                        <h3>–ö–∞–∫ –∫—É–ø–∏—Ç—å –∫—Ä–∞—Å–∏–≤—ã–µ —Å–∞–ª—é—Ç—ã –∏ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏ –≤ –ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ</h3>
                        <div class="icon-container">
                            <i class="fas fa-minus"></i>
                        </div>
                    </div>
                    <div class="faq-answer">
                        <p>–£ –Ω–∞—Å –Ω–∞ —Å–∞–π—Ç–µ –≤—ã –º–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç—å –æ–Ω–ª–∞–π–Ω —Å–∞–º—ã–µ –∫—Ä–∞—Å–∏–≤—ã–µ –Ω–∞–∑–µ–º–Ω—ã–µ —Å–∞–ª—é—Ç—ã –∏ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∏ –∫—Ä—É–ø–Ω–æ–≥–æ –∏ –º–µ–ª–∫–æ–≥–æ –∫–∞–ª–∏–±—Ä–∞ –ø–æ –≤—ã–≥–æ–¥–Ω–æ–π —Ü–µ–Ω–µ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Simple Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="logo">
                        <img src="images/icons/logo-vert.png" alt="Logo Vertical" class="logo-icon-footer" />
                    </div>
                </div>
                <div class="footer-center">
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="fab fa-facebook"></i>
                            <span>Facebook</span>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-instagram"></i>
                            <span>Instagram</span>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-vk"></i>
                            <span>VKontakte</span>
                        </a>
                    </div>
                    <div class="company-info">
                        <p>TOO King Salute, 12-–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω 7/2 —Å. –ê–ª–º–∞—Ç—ã, –ò–Ω–¥–µ–∫—Å 050035</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp Button -->
    <div class="floating-whatsapp">
        <i class="fab fa-whatsapp"></i>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
        const productsData = [
            {
                id: 1,
                name: "–°–∞–ª—é—Ç VIP –•–ê–ù 188 –∑–∞—Ä—è–¥–æ–≤",
                image: "images/products/salyut-vip-1.jpg",
                currentPrice: "14 000",
                oldPrice: "18 000",
                discount: "-20%",
                badge: "–¢–æ–ø –ø—Ä–æ–¥–∞–∂",
                category: "new",
            },
            {
                id: 2,
                name: "–°–∞–ª—é—Ç –ö–ê–†–ù–ê–í–ê–õ–¨–ù–ê–Ø –ù–û–ß–¨ 120 –∑–∞—Ä—è–¥–æ–≤",
                image: "images/products/salyut-vip-1.jpg",
                currentPrice: "12 500",
                oldPrice: "15 000",
                discount: "-17%",
                badge: "–¢–æ–ø –ø—Ä–æ–¥–∞–∂",
                category: "new",
            },
            {
                id: 3,
                name: "–°–∞–ª—é—Ç –ù–û–í–û–ì–û–î–ù–ò–ô 96 –∑–∞—Ä—è–¥–æ–≤",
                image: "images/products/salyut-vip-1.jpg",
                currentPrice: "9 800",
                oldPrice: "12 000",
                discount: "-18%",
                badge: "–¢–æ–ø –ø—Ä–æ–¥–∞–∂",
                category: "top",
            },
            {
                id: 4,
                name: "–°–∞–ª—é—Ç –ó–≤–µ–∑–¥–∞/–ñ—É–ª–¥—ã–∑ 19 –∑–∞—Ä—è–¥–æ–≤",
                image: "images/products/salyut-vip-1.jpg",
                currentPrice: "14 000",
                oldPrice: "18 000",
                discount: "-20%",
                badge: "–¢–æ–ø –ø—Ä–æ–¥–∞–∂",
                category: "top",
            }
        ];

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞
        function createProductCard(product) {
            return `
                <div class="product-card" data-product-id="${product.id}">
                    <div class="product-badge">${product.badge}</div>
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/200x200/8B5CF6/FFFFFF?text=VIP+–•–ê–ù'">
                    </div>
                    <h3 class="product-name">${product.name}</h3>
                    <div class="product-price">
                        <span class="current-price">${product.currentPrice} ‚Ç∏</span>
                        <span class="old-price">${product.oldPrice} ‚Ç∏</span>
                        <span class="discount">${product.discount}</span>
                    </div>
                    <div class="product-buttons">
                        <button class="btn btn-buy" data-product-id="${product.id}">–ö—É–ø–∏—Ç—å</button>
                        <button class="btn btn-whatsapp" data-product-id="${product.id}">
                            <i class="fab fa-whatsapp"></i>
                            –ó–∞–∫–∞–∑ –ø–æ Whatsapp
                        </button>
                    </div>
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
        function renderProducts() {
            const newProductsContainer = document.getElementById("new-products");
            const topProductsContainer = document.getElementById("top-products");

            const newProducts = productsData.filter(product => product.category === "new");
            const topProducts = productsData.filter(product => product.category === "top");

            newProductsContainer.innerHTML = newProducts.map(product => createProductCard(product)).join("");
            topProductsContainer.innerHTML = topProducts.map(product => createProductCard(product)).join("");

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
            setTimeout(() => {
                addProductButtonHandlers();
            }, 100);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
        function addProductButtonHandlers() {
            console.log('–î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫...');
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–ö—É–ø–∏—Ç—å" (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã)
            const buyButtons = document.querySelectorAll('.btn-buy:not([data-handler-added])');
            console.log('–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫ "–ö—É–ø–∏—Ç—å":', buyButtons.length);
            
            buyButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å"');
                    const productId = parseInt(this.getAttribute('data-product-id'));
                    addToCart(productId);
                });
                button.setAttribute('data-handler-added', 'true');
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ WhatsApp (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã)
            const whatsappButtons = document.querySelectorAll('.btn-whatsapp:not([data-handler-added])');
            console.log('–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫ WhatsApp:', whatsappButtons.length);
            
            whatsappButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ WhatsApp');
                    const productId = parseInt(this.getAttribute('data-product-id'));
                    orderViaWhatsApp(productId);
                });
                button.setAttribute('data-handler-added', 'true');
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(productId) {
            console.log('addToCart –≤—ã–∑–≤–∞–Ω–∞ —Å productId:', productId);
            const product = productsData.find(p => p.id === productId);
            if (product) {
                console.log('–¢–æ–≤–∞—Ä –Ω–∞–π–¥–µ–Ω:', product.name);
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
                showCartModal(product);
            } else {
                console.log('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω!');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
        function saveToCart(product) {
            const savedCart = localStorage.getItem('kingSalutCart');
            let cartItems = savedCart ? JSON.parse(savedCart) : [];
            
            const existingItem = cartItems.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cartItems.push({
                    id: product.id,
                    name: product.name,
                    image: product.image,
                    price: parseInt(product.currentPrice.replace(/\s/g, '')),
                    quantity: 1
                });
            }
            
            localStorage.setItem('kingSalutCart', JSON.stringify(cartItems));
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã
        function showCartModal(product) {
            const modal = document.getElementById("cartModal");
            const cartItemImage = document.getElementById("cartItemImage");
            const cartItemName = document.getElementById("cartItemName");
            const cartItemPrice = document.getElementById("cartItemPrice");
            const cartItemQuantity = document.getElementById("cartItemQuantity");
            const cartItemTotal = document.getElementById("cartItemTotal");

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞
            cartItemImage.src = product.image;
            cartItemImage.alt = product.name;
            cartItemName.textContent = product.name;
            cartItemPrice.textContent = product.currentPrice + " ‚Ç∏";
            cartItemQuantity.value = 1;
            cartItemTotal.textContent = product.currentPrice + " ‚Ç∏";

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            modal.classList.add("show");
            document.body.style.overflow = "hidden";

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
            const minusBtn = document.querySelector(".quantity-btn.minus");
            const plusBtn = document.querySelector(".quantity-btn.plus");

            function updateTotal() {
                const quantity = parseInt(cartItemQuantity.value);
                const price = parseInt(product.currentPrice.replace(/\s/g, ""));
                const total = quantity * price;
                cartItemTotal.textContent = total.toLocaleString() + " ‚Ç∏";
            }

            minusBtn.onclick = () => {
                if (cartItemQuantity.value > 1) {
                    cartItemQuantity.value = parseInt(cartItemQuantity.value) - 1;
                    updateTotal();
                }
            };

            plusBtn.onclick = () => {
                if (cartItemQuantity.value < 99) {
                    cartItemQuantity.value = parseInt(cartItemQuantity.value) + 1;
                    updateTotal();
                }
            };

            cartItemQuantity.onchange = updateTotal;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É"
            const checkoutBtn = document.querySelector(".btn-checkout");
            if (checkoutBtn) {
                checkoutBtn.onclick = function() {
                    const quantity = parseInt(cartItemQuantity.value) || 1;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
                    updateCartItemQuantity(product, quantity);
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    closeCartModal();
                    
                    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ—Ä–∑–∏–Ω—É
                    window.location.href = 'cart.html';
                };
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏"
            const continueBtn = document.querySelector(".continue-shopping");
            if (continueBtn) {
                continueBtn.onclick = function(e) {
                    e.preventDefault();
                    closeCartModal();
                };
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
            const closeBtn = document.querySelector(".close");
            if (closeBtn) {
                closeBtn.onclick = closeCartModal;
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    closeCartModal();
                }
            };
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
        function updateCartItemQuantity(product, quantity) {
            const savedCart = localStorage.getItem('kingSalutCart');
            let cartItems = savedCart ? JSON.parse(savedCart) : [];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ
            const existingItem = cartItems.find(item => item.id === product.id);
            
            if (existingItem) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
                existingItem.quantity = quantity;
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä
                cartItems.push({
                    id: product.id,
                    name: product.name,
                    image: product.image,
                    price: parseInt(product.currentPrice.replace(/\s/g, '')),
                    quantity: quantity
                });
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('kingSalutCart', JSON.stringify(cartItems));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
            updateCartCount();
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã
        function closeCartModal() {
            const modal = document.getElementById("cartModal");
            modal.classList.remove("show");
            document.body.style.overflow = "auto";
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ WhatsApp
        function orderViaWhatsApp(productId) {
            const product = productsData.find(p => p.id === productId);
            if (product) {
                const message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å: ${product.name} –∑–∞ ${product.currentPrice} ‚Ç∏`;
                const whatsappUrl = `https://wa.me/77774567868?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            if (cartCount) {
                const savedCart = localStorage.getItem('kingSalutCart');
                const cartItems = savedCart ? JSON.parse(savedCart) : [];
                const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.textContent = totalItems;
                cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ—Ä–∑–∏–Ω—ã
        function openCart() {
            const savedCart = localStorage.getItem('kingSalutCart');
            const cartItems = savedCart ? JSON.parse(savedCart) : [];
            
            if (cartItems.length === 0) {
                showNotification('–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.');
                return;
            }
            
            window.location.href = 'simple-cart.html';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message) {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 10000;
                font-weight: 500;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            console.log('–†–∞–±–æ—á–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            renderProducts();
            updateCartCount();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
            const cartLink = document.getElementById('cartLink');
            if (cartLink) {
                cartLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    openCart();
                });
            }
        });

        // CSS –∞–Ω–∏–º–∞—Ü–∏–∏
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
